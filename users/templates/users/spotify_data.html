<!DOCTYPE html>
<html>
<head>
    <title>Your Spotify Wrapped</title>
</head>
<body>
    <h1>Your Spotify Wrapped</h1>

    <h2>Top Artists (Last Month)</h2>
    {% if top_artists.items %}
      <ul>
        {% for artist in top_artists.items %}
          <li>
            <strong>{{ artist.name }}</strong><br>
            Genres: {{ artist.genres|join:", " }}<br>
            Popularity: {{ artist.popularity }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No top artists data available.</p>
    {% endif %}

    <h2>Top Tracks (Last Month)</h2>
    {% if top_tracks.items %}
      <ul>
        {% for track in top_tracks.items %}
          <li>
            <strong>{{ track.name }}</strong> by 
            {% for artist in track.artists %}
                {{ artist.name }}{% if not forloop.last %}, {% endif %}
            {% endfor %}
            <br>
            Album: {{ track.album.name }}<br>
            Popularity: {{ track.popularity }}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No top tracks data available.</p>
    {% endif %}

    <form action="{% url 'users:spotify_logout' %}" method="post">
      {% csrf_token %}
      <button type="submit">Logout from Spotify</button>
    </form>
</body>
</html>
